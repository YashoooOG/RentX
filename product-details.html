<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Details - RentX</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <link rel="stylesheet" href="mainpage.css">
    <link rel="stylesheet" href="product-details.css">
    <script src="auth.js"></script>
    <script src="wishlist-manager.js"></script>
</head>
<body>
    <header class="main-header">
        <nav class="navbar navbar-light navbar-custom-bg px-3 py-3">
            <!-- Logo + Name -->
            <a class="navbar-brand d-flex align-items-center" href="LandingPage.html" style="min-width: fit-content;">
                <img src="images/D1Qy2q01-cropped.svg" alt="Logo" class="logo-svg">
                <span class="brand-text">RentX</span>
            </a>

            <!-- Spacer -->
            <div class="flex-grow-1"></div>
            
            <!-- Right side actions -->
            <div class="navbar-actions d-flex align-items-center">
                <!-- Back to main page button -->
                <button class="btn btn-outline-dark me-2" onclick="window.location.href='mainpage.html'" title="Back to Browse">
                    <i class="bi bi-arrow-left"></i> Back to Browse
                </button>
                
                <!-- Wishlist button -->
                <button class="btn btn-outline-dark me-2" onclick="window.location.href='wishlist.html'" title="Wishlist">
                    <i class="bi bi-heart"></i>
                </button>
                
                <!-- Profile button (shown when logged in) -->
                <button class="btn btn-outline-dark me-2 auth-hidden" onclick="window.location.href='profile.html'" 
                        title="My Profile" id="profileBtn">
                    <i class="bi bi-person-circle"></i> Profile
                </button>
                
                <!-- Buttons for larger screens (shown when NOT logged in) -->
                <div class="d-none d-lg-flex" id="authButtons">
                    <button class="btn btn-link text-decoration-none text-black me-2" onclick="window.location.href='login.html'">Sign In</button>
                    <button class="btn btn-dark btn-round text-nowrap" onclick="window.location.href='login.html'">Create Account</button>
                </div>

                <!-- Button for smaller screens (shown when NOT logged in) -->
                <div class="d-lg-none" id="authButtonMobile">
                    <button class="btn btn-dark btn-round" onclick="window.location.href='login.html'">Sign In</button>
                </div>
                
                <!-- Logout button (shown when logged in) -->
                <button class="btn btn-dark btn-round auth-hidden" onclick="logout()" id="logoutBtn">
                    <i class="bi bi-box-arrow-right"></i> Logout
                </button>
            </div>
        </nav>
    </header>
    
    <main class="container mt-4">
        <!-- Loading state -->
        <div class="text-center py-5" id="loadingState">
            <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <p class="mt-3 text-muted">Loading product details...</p>
        </div>
        
        <!-- Product not found -->
        <div class="text-center py-5 d-none" id="notFoundState">
            <i class="bi bi-exclamation-triangle text-warning" style="font-size: 4rem;"></i>
            <h3 class="mt-3 text-muted">Product Not Found</h3>
            <p class="text-muted">The product you're looking for doesn't exist or has been removed.</p>
            <button class="btn btn-dark" onclick="window.location.href='mainpage.html'">Back to Browse</button>
        </div>
        
        <!-- Product Details -->
        <div class="d-none" id="productDetails">
            <div class="row">
                <!-- Product Images -->
                <div class="col-md-6">
                    <div class="product-image-gallery">
                        <div class="main-image-container">
                            <img id="mainProductImage" src="" alt="" class="main-product-image">
                            <button class="btn btn-light wishlist-btn-large d-none" id="wishlistBtnLarge" onclick="toggleProductWishlist()">
                                <i class="bi bi-heart" id="wishlistIcon"></i>
                            </button>
                        </div>
                        <div class="thumbnail-container mt-3 d-none" id="thumbnailContainer">
                            <!-- Thumbnail images will be populated here -->
                        </div>
                    </div>
                </div>
                
                <!-- Product Information -->
                <div class="col-md-6">
                    <div class="product-info">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="mainpage.html">Browse</a></li>
                                <li class="breadcrumb-item"><span id="productCategory"></span></li>
                                <li class="breadcrumb-item active" aria-current="page" id="productName"></li>
                            </ol>
                        </nav>
                        
                        <h1 class="product-title" id="productTitle"></h1>
                        <div class="product-meta mb-3">
                            <span class="badge bg-secondary me-2" id="categoryBadge"></span>
                            <span class="availability-badge" id="availabilityBadge"></span>
                        </div>
                        
                        <div class="product-price mb-4">
                            <h2 class="price-main text-success" id="productPrice"></h2>
                            <p class="text-muted">Deposit: <span class="fw-bold" id="productDeposit"></span></p>
                        </div>
                        
                        <div class="product-seller-info mb-4">
                            <div class="d-flex align-items-center mb-2">
                                <i class="bi bi-person-circle me-2 text-muted"></i>
                                <span><strong>Seller:</strong> <span id="productSeller"></span></span>
                            </div>
                            <div class="d-flex align-items-center">
                                <i class="bi bi-geo-alt me-2 text-muted"></i>
                                <span><strong>Location:</strong> <span id="productLocation"></span></span>
                            </div>
                        </div>
                        
                        <div class="product-description mb-4">
                            <h5>Description</h5>
                            <p class="text-muted" id="productDescription"></p>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="product-actions">
                            <div class="row g-2">
                                <div class="col-12 col-sm-6">
                                    <button class="btn btn-primary btn-lg w-100" id="rentNowBtn" onclick="rentProduct()">
                                        <i class="bi bi-calendar-check me-2"></i>Rent Now
                                    </button>
                                </div>
                                <div class="col-12 col-sm-6">
                                    <button class="btn btn-outline-danger btn-lg w-100" id="wishlistBtn" onclick="toggleProductWishlist()">
                                        <i class="bi bi-heart me-2" id="wishlistBtnIcon"></i><span id="wishlistBtnText">Add to Wishlist</span>
                                    </button>
                                </div>
                            </div>
                            <div class="mt-3">
                                <button class="btn btn-outline-secondary" onclick="shareProduct()">
                                    <i class="bi bi-share me-2"></i>Share Product
                                </button>
                                <button class="btn btn-outline-secondary ms-2" onclick="reportProduct()">
                                    <i class="bi bi-flag me-2"></i>Report
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Related Products Section -->
            <div class="row mt-5">
                <div class="col-12">
                    <hr>
                    <h4 class="mb-4">Related Products</h4>
                    <div class="row" id="relatedProducts">
                        <!-- Related products will be loaded here -->
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
    <script src="product-details.js"></script>
</body>
</html>
